import com.rameses.annotations.*
import com.rameses.common.*;
import com.rameses.services.extended.*

class ComisExpiredLeaseReportInterceptor {
	@Service('DateService')
	def dtSvc;

	@DataContext('vw_application')
	def em_app;

	@After(pattern="FormReportService.getData", eval="#{args[0].reportid == 'expired_lease_contract_listing'}", index=100)
	public void getData(def evt) {
		def params  = evt.args[0].parameters;
		evt.result.data = em_app
					.find([cemetery_objid: params.cemetery.objid, state: 'EXPIRED'])
					.orderBy('appno')
					.list();
	}
}