<schema>
    <element tablename="application">
        <field name="objid" primary="true" prefix="APP" />
        <!-- DRAFT, FORAPPROVAL, ACTIVE, RENEWED, EXPIRED, CLOSED -->
        <field name="state" required="true" caption="State" searchable="true" defaultValue="DRAFT" />
        <field name="resourceinfo_objid" required="true" />
        <field name="online" required="true" type="boolean" defaultValue="true" />
        <!-- NEW, RENEWAL -->
        <field name="apptype" required="true" caption="App Type" indexed="true" defaultValue="NEW" />
        <field name="appno" caption="App No." searchable="true" />
        <field name="dtapplied" required="true" caption="App Date" />
        <field name="dtapproved" caption="Date Approved" />
        <field name="appyear" required="true" caption="App Year" />
        <field name="applicant_objid" required="true" />
        <field name="applicant_name" required="true" caption="Applicant" searchable="true" />
        <field name="applicant_address" required="true" caption="Address" />
        <field name="deceased_objid" required="true" />
        <field name="dtexpiry" caption="Expiry Date" searchable="true" />
        <field name="renewable" type="boolean" required="true" caption="Renewable?" indexed="true" defaultValue="false"/>
        <field name="leaseduration" type="integer" caption="Lease Duration" defaultValue="0" />
        <field name="amount" type="decimal" caption="Amount" required="true" />
        <field name="amtpaid" type="decimal" caption="Amount Paid" required="true" />
        <field name="permitid" />
        <field name="reportid" />
        <field name="balance" type="decimal" expr="amount - amtpaid" caption="Balance" />
        <complex name="deceased" ref="deceased" jointype="many-to-one" required="true">
            <key field="deceased_objid" target="objid" />
        </complex>
        <complex name="relation" ref="relation" jointype="many-to-one" required="true">
            <key field="relation_objid" target="objid" />
        </complex>
        <complex name="resourceinfo" ref="cemetery_section_resource_info" jointype="many-to-one" required="true">
            <key field="resourceinfo_objid" target="objid" />
        </complex>
        <complex name="fees" ref="application_fee" jointype="one-to-many" required="false">
            <key field="objid" target="parentid" />
        </complex>
    </element>
</schema>